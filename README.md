# HTTPServerAndLogFileParsing
This is a repository to implement a basic HTTP server in PHP using sockets to handle HTTP requests and to write a small script that parses the log file generated by the server and take care of some statistics.
The task description will be attached at the end of ReadMe.

## How to run the code:

#### Run the server:
```PHP
php src/my-web-server.php  127.0.0.1 8080
```

#### Send a request to the server using curl:
```BASH
curl -X GET http://127.0.0.1:8080/path2
curl -X GET http://127.0.0.1:8080/
curl -X GET http://127.0.0.1:8080/path1
curl -X POST http://127.0.0.1:8080/
```

#### Send a request to the server using python script:
`
python src/request.py
`

#### Run the traffic analyser:
`
python src/traffic_analyser.py --from "2024-06-24 00:00:00" --to "2024-06-24 06:00:00"
`

#### Tests
There are tests for both my-web-server.php and traffic_analyser.py.
The commands to run them in terminal will be updated in the future.
For now, you can run the tests by clicking on the run button in the test file.
(Hint: the MyWebServerTest.php requires the server to be running.)

### To be developed in the future:
1. More robust way to handle the request and response.
2. More tests for the server.
3. Use postgresSQL to store the logs with UUIDs.
4. Draw graphs for the statistics.
5. Use pipeline to run the tests automatically.


## Task Description:
### Task 1: HTTP Server
In this exercise you will write a basic HTTP server in PHP using sockets to handle HTTP
requests.
1. You cannot use the inbuilt webserver that comes with PHP.
2. Your script should run via command line.
   e.g. If your server script is named “my-web-server.php”, you should be able to
   run it using the PHP CLI:
   php my-web-server.php
3. When starting the webserver, you should be able to pass a host and a port as
   arguments to bind to
4. All requests handled by this webserver should be logged to a file (you are free to
   choose the format, depending on the next exercise)

### Task 2: Log file parsing
From the web server access log file generated in 1. and using either PHP or Python, write
a small script that parses the log file and
1. prints
   a. max, average and 95th percentile (request/min)
   b. http status code rate per minute
2. Your script should run via command line.
   e.g. If your server script is named “my-web-server-traTic-analyser.php”, you
   should be able to run it using the PHP CLI:
   php my-web-server-traffic-analyser.php
3. Your script should accept 2 parameters “from” and “to” that filters for log entries
   only during this period, if not set then the default time range to consider should
   be the last 1 hour.
4. Bonus (not required): parse the access log file and print any anomalies using
   Isolation Forest

Example partial output of the program:
- Statistics from 2023-06-14 08:00:00 to 2023-06-14 09:00:00
- Maximum RPM: 120
- Average RPM: 75.67
- 95 percentile: 110